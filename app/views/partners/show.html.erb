<section class="client">
  <div class="container-fluid">
    <div class="card">
      <div class="card-close">
        <%= link_to 'Editar', edit_partner_path(@partner), class: 'btn btn-primary' %>
      </div>
      <div class="card-body text-center">
        <div class="client-title">
          <h1><%= @partner.name %></h1>
          <h4><%= @partner.full_address %></h4>
          <p>Parceiro desde <td><%= l @partner.created_at, format: "%d de %B de %Y" %></td></p>
        </div>
      </div>
    </div>
  </div>
  <div class="container-fluid">
    <div class="card">
      <div class="card-close">
        <%= button_tag 'Adicionar doação', class: 'btn btn-sm btn-primary', data: { toggle: 'modal', target: '#donation-modal' } %>
      </div>
      <div class="card-header d-flex align-items-center">
        <h3>Doações</h3>
      </div>
      <div class="card-body">
        <% unless @donations.empty? %>
          <table class="table table-hover">
          <thead>
            <tr>
              <th>Valor</th>
              <th>Tipo de pagamento</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% @donations.each do |donation| %>
              <tr>
                <td><%= number_to_currency(donation.value) %></td>
                <td><%= donation.payment_type %></td>
                <td>
                  <%= link_to partner_donation_path(donation), method: 'delete', class: 'btn btn-sm', data: { confirm: 'Tem certeza que deseja excluir?' } do %>
                    <%= icon('trash') %>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
        <% else %>
          <h4 class="text-center">Nenhuma doação foi realizada.</h4>
        <% end %>
      </div>
    </div>
  </div>
</section>

<%= render 'modal/partner_donation', donation: @partner.donations.build %>
